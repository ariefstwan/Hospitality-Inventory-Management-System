<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>RedPartners â€“ Inventory & Procurement</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <div class="app-root">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar__logo">
        <div class="logo-dot"></div>
        <span>RedPartners</span>
      </div>
      <nav class="sidebar__nav">
        <button class="nav-item active" data-page="room-inventory">Room Inventory</button>
        <button class="nav-item" data-page="laundry-inventory">Laundry Inventory</button>
        <button class="nav-item nav-item--parent" data-page="stock-movements" data-group="stock-movements" aria-expanded="true">Stock Movements</button>
        <div class="nav-children is-open" data-group="stock-movements">
          <button class="nav-item nav-item--child" data-page="stock-movements" data-group="stock-movements" data-record-tab="IN">Incoming</button>
          <button class="nav-item nav-item--child" data-page="stock-movements" data-group="stock-movements" data-record-tab="OUT">Outgoing</button>
        </div>
        <button class="nav-item" data-page="stock-alert">Stock Alert<span id="navStockAlertDot" class="nav-dot"></span></button>
        <button class="nav-item" data-page="stock-opname">Stock Opname</button>
        <button class="nav-item" data-page="replenishment-requests">Purchase Request</button>
        <button class="nav-item" data-page="stock-on-hand">Stock On Hand</button>
      </nav>
    </aside>

    <!-- Main layout -->
    <div class="app-main">
      <!-- Header -->
      <header class="header">
        <div class="header__title">
          <h1>RedPartners â€“ Inventory</h1>
          <p class="header__subtitle">Inventory & Procurement Dashboard</p>
        </div>

        <div class="header__controls">
          <div class="header__field">
            <label for="propertySelect">Property</label>
            <select id="propertySelect">
              <option>Urbanview Jakarta Sudirman</option>
              <option>RedDoorz Plus @ Dago Bandung</option>
              <option>Sans Hotel Jakarta Thamrin</option>
            </select>
          </div>
          <div class="header__user profile-switcher">
            <button class="profile-toggle" id="profileToggle" aria-haspopup="true" aria-expanded="false">
              <div class="avatar" id="headerAvatar">U</div>
              <div class="user-meta">
                <span class="user-name" id="headerUserName">User</span>
                <span class="user-role" id="headerUserRole">Role</span>
              </div>
              <span class="chevron" aria-hidden="true">&#9662;</span>
            </button>
            <div class="profile-menu hidden" id="profileMenu">
              <div class="profile-menu__title">Switch Profile</div>
              <div class="profile-menu__list" id="profileMenuList"></div>
            </div>
          </div>
        </div>
      </header>

      <!-- Page container -->
      <main class="main">
        <!-- Room Inventory Page -->
        <section id="page-room-inventory" class="page page--active">
          <div class="page-header">
            <div>
              <h2>Room Inventory</h2>
              <p>Manage room-related operating supplies & equipment.</p>
            </div>
            <button id="btnAddRoomItem" class="btn btn-primary">Add Room Item</button>
          </div>

          <div class="filters-row">
            <div class="filter-group">
                <input id="roomSearchInput" class="input" type="text" placeholder="Search item name" />
              </div>
              <div class="filter-group">
                <select id="roomCategoryFilter" class="input">
                  <option value="all">All Categories</option>
                  <option value="Amenities">Amenities</option>
                  <option value="Beverage">Beverage</option>
                  <option value="Disposable">Disposable</option>
                  <option value="Room Equipment">Room Equipment</option>
                </select>
              </div>
              <div class="filter-group">
                <select id="roomStatusFilter" class="input">
                  <option value="all">All Status</option>
                  <option value="ACTIVE">Active</option>
                  <option value="ARCHIVED">Archived</option>
                </select>
              </div>
          </div>

          <div class="card" id="purchaseRequestListCard">
            <div class="table-wrapper">
              <table>
                <thead>
                  <tr>
                    <th>Item Name</th>
                    <th>Vendor</th>
                    <th>Category</th>
                    <th>Unit</th>
                    <th>Mandatory</th>
                    <th>Par / Room</th>
                    <th>Min Stock</th>
                    <th>Max Stock</th>
                    <th>On-hand</th>
                    <th>Status</th>
                    <th class="table-actions-col">Actions</th>
                  </tr>
                </thead>
                <tbody id="roomInventoryTableBody">
                  <!-- Filled by JS -->
                </tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- Laundry Inventory Page -->
        <section id="page-laundry-inventory" class="page">
          <div class="page-header">
            <div>
              <h2>Laundry Inventory</h2>
              <p>Manage linens and textile inventory.</p>
            </div>
            <button id="btnAddLaundryItem" class="btn btn-primary">Add Laundry Item</button>
          </div>

          <div class="filters-row">
            <div class="filter-group">
              <input id="laundrySearchInput" class="input" type="text" placeholder="Search item name" />
            </div>
              <div class="filter-group">
                <select id="laundryCategoryFilter" class="input">
                  <option value="all">All Categories</option>
                  <option value="Bedsheet">Bedsheet</option>
                  <option value="Pillowcase">Pillowcase</option>
                  <option value="Duvet Cover">Duvet Cover</option>
                  <option value="Bath Towel">Bath Towel</option>
                  <option value="Bath Mat">Bath Mat</option>
                </select>
              </div>
              <div class="filter-group">
                <select id="laundryStatusFilter" class="input">
                  <option value="all">All Status</option>
                  <option value="ACTIVE">Active</option>
                  <option value="ARCHIVED">Archived</option>
                </select>
              </div>
          </div>

          <div class="card" id="purchaseRequestListCard">
            <div class="table-wrapper">
              <table>
                <thead>
                  <tr>
                    <th>Item Name</th>
                    <th>Vendor</th>
                    <th>Category</th>
                    <th>Size / Spec</th>
                    <th>Unit</th>
                    <th>Par / Room</th>
                    <th>Min Stock</th>
                    <th>On-hand</th>
                    <th>Mandatory</th>
                    <th>Status</th>
                    <th class="table-actions-col">Actions</th>
                  </tr>
                </thead>
                <tbody id="laundryInventoryTableBody">
                  <!-- Filled by JS -->
                </tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- Stock Movements Page -->
        <section id="page-stock-movements" class="page">
          <div class="page-header">
            <div>
              <h2>Stock Movements</h2>
              <p>Document incoming and outgoing stock.</p>
            </div>
          </div>

          <div class="card card--dense">

            <div class="movement-panel" data-record-panel="IN">
              <div class="page-header movement-section-header">
                <div>
                  <h3 class="section-title">Incoming Records</h3>
                  <p class="header__subtitle">Create or review incoming stock movements.</p>
                </div>
                <div class="movement-actions">
                  <button id="btnOpenIncomingModal" class="btn btn-primary" data-record-action="IN">New Incoming</button>
                </div>
              </div>
              <div class="table-wrapper">
                <table>
                  <thead>
                <tr>
                  <th>ID</th>
                  <th>Date</th>
                  <th>Property</th>
                  <th>PO</th>
                  <th>Note</th>
                  <th>BAST</th>
                  <th>Delivery Proof</th>
                  <th>Status</th>
                  <th>Lines</th>
                  <th>Total Qty</th>
                  <th class="table-actions-col">Actions</th>
                </tr>
                  </thead>
                  <tbody id="incomingDocsTableBody"></tbody>
                </table>
              </div>
            </div>

            <div class="movement-panel hidden" data-record-panel="OUT">
              <div class="page-header movement-section-header">
                <div>
                  <h3 class="section-title">Outgoing Records</h3>
                  <p class="header__subtitle">Create or review outgoing stock movements.</p>
                </div>
                <div class="movement-actions">
                  <button id="btnOpenOutgoingModal" class="btn btn-primary" data-record-action="OUT">New Outgoing</button>
                </div>
              </div>
              <div class="table-wrapper">
                <table>
                  <thead>
                <tr>
                  <th>ID</th>
                  <th>Date</th>
                  <th>Property</th>
                  <th>Destination</th>
                  <th>Note</th>
                  <th>Status</th>
                  <th>Lines</th>
                  <th>Total Qty</th>
                  <th class="table-actions-col">Actions</th>
                </tr>
                  </thead>
                  <tbody id="outgoingDocsTableBody"></tbody>
                </table>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="page-header" style="margin-bottom:8px;">
              <div>
                <h3 style="margin:0;">Movement History</h3>
                <p class="header__subtitle">View, modify, discard, revert, or re-open movements.</p>
              </div>
              <div class="filters-row" style="margin:0;">
                <div class="filter-group">
                  <select id="movementDirectionFilter" class="input">
                    <option value="ALL">All</option>
                    <option value="IN">Incoming</option>
                    <option value="OUT">Outgoing</option>
                  </select>
                </div>
                <div class="filter-group">
                  <input id="movementSearchInput" class="input" placeholder="Search ID or property" />
                </div>
              </div>
            </div>
            <div class="table-wrapper">
              <table>
                <thead>
              <tr>
                <th>ID</th>
                <th>Direction</th>
                <th>Date</th>
                <th>Property</th>
                <th>Note</th>
                <th>Status</th>
                <th>Lines</th>
                <th>Total Qty</th>
                <th class="table-actions-col">Actions</th>
              </tr>
                </thead>
                <tbody id="movementHistoryTableBody"></tbody>
              </table>
            </div>
            <div class="pagination">
              <button id="movementPrevPage" class="btn btn-secondary btn-sm">Prev</button>
              <span id="movementPageInfo" class="info-text"></span>
              <button id="movementNextPage" class="btn btn-secondary btn-sm">Next</button>
            </div>
          </div>
        </section>

        <!-- Stock Alert Page -->
        <section id="page-stock-alert" class="page">
          <div class="page-header">
            <div>
              <h2>Stock Alert</h2>
              <p>Monitor items below minimum stock & prepare replenishment.</p>
            </div>
            <div style="display:flex; align-items:center; gap:8px;">
              <label style="font-size:12px;color:var(--rp-text-muted);">Select</label>
              <input type="checkbox" title="Select all alerts" />
              <button id="btnCreateReplenishmentFromAlert" class="btn btn-primary" disabled>
                Create Replenishment Request
              </button>
            </div>
          </div>

          <div class="filters-row">
            <div class="filter-group">
              <select id="alertStatusFilter" class="input">
                <option value="all">All</option>
                <option value="critical">Critical</option>
                <option value="below">Below Min</option>
              </select>
            </div>
          </div>

          <div class="card">
            <div class="table-wrapper">
              <table>
                <thead>
                  <tr>
                    <th style="width:36px; text-align:center;"><input type="checkbox" id="selectAllAlerts" /></th>
                    <th>Item Name</th>
                    <th>Type</th>
                    <th>On-hand</th>
                    <th>Min Stock</th>
                    <th>Status</th>
                    <th>Mandatory</th>
                    <th>Suggested Qty</th>
                    <th>Last 7d Usage</th>
                  </tr>
                </thead>
                <tbody id="stockAlertTableBody">
                  <!-- Filled by JS -->
                </tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- Stock Opname Page -->
        <section id="page-stock-opname" class="page">
          <div class="page-header">
            <div>
              <h2>Stock Opname</h2>
              <p>Schedule and record physical stock counts.</p>
            </div>
            <button id="btnNewStockOpname" class="btn btn-primary">New Stock Opname</button>
          </div>

          <div class="card">
            <div class="table-wrapper">
              <table>
                <thead>
                  <tr>
                    <th>Opname ID</th>
                    <th>Session Name</th>
                    <th>Coverage</th>
                    <th>Scheduled Date</th>
                    <th>Status</th>
                    <th>Created By</th>
                    <th>Approved By</th>
                    <th>Last Updated</th>
                    <th class="table-actions-col">Actions</th>
                  </tr>
                </thead>
                <tbody id="stockOpnameTableBody">
                  <!-- Filled by JS -->
                </tbody>
              </table>
            </div>
          </div>

          <!-- Detail modal -->
          <div id="modalStockOpnameDetail" class="modal hidden stock-opname-modal">
            <div class="modal__backdrop"></div>
            <div class="modal__content modal__content--wide modal__content--tall">
              <div class="modal__header">
                <div>
                  <h3 id="detailOpnameTitle">Stock Opname Detail</h3>
                  <p id="detailOpnameMeta"></p>
                </div>
                <div class="detail-actions">
                <button id="btnSubmitOpname" class="btn btn-primary">Submit for Approval</button>
                  <button id="btnApproveOpname" class="btn btn-primary">Approve & Post</button>
                  <button class="modal__close" data-close-modal="modalStockOpnameDetail">&times;</button>
                </div>
              </div>
              <div class="table-wrapper">
                <table>
                  <thead>
                    <tr>
                      <th>Item Name</th>
                      <th>Type</th>
                      <th>System Qty</th>
                      <th>Counted Qty</th>
                      <th>Variance</th>
                      <th>Notes</th>
                    </tr>
                  </thead>
                  <tbody id="stockOpnameLinesTableBody">
                    <!-- Filled by JS -->
                  </tbody>
                </table>
              </div>
              <div class="modal__footer" style="justify-content: flex-end;">
                <button class="btn btn-secondary" data-close-modal="modalStockOpnameDetail">Close</button>
              </div>
            </div>
          </div>
        </section>

        <!-- Replenishment Requests Page -->
        <section id="page-replenishment-requests" class="page">
          <div class="page-header">
            <div>
              <h2>Purchase Request</h2>
              <p>Track inventory-based purchase requests.</p>
            </div>
            <div style="display:flex; gap:8px; align-items:center;">
              <button id="btnNewReplenishment" class="btn btn-primary">New Purchase Request</button>
            </div>
          </div>

          <div class="card">
            <div class="table-wrapper">
              <table>
                <thead>
                  <tr>
                    <th>Request ID</th>
                    <th>Property</th>
                    <th>Created By</th>
                    <th>Items</th>
                    <th>Status</th>
                    <th>Created At</th>
                    <th>Updated At</th>
                    <th class="table-actions-col">Actions</th>
                  </tr>
                </thead>
                <tbody id="replenishmentTableBody">
                  <!-- Filled by JS -->
                </tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- Purchase Request Detail Page -->
        <section id="page-replenishment-detail" class="page">
          <div class="page-header">
            <div>
              <h2>Purchase Request Detail</h2>
              <p>View or edit a purchase request.</p>
            </div>
            <div class="detail-actions">
              <button id="btnCloseReplDetail" class="btn btn-secondary">Back to List</button>
            </div>
          </div>

          <div id="purchaseRequestDetail" class="card">
            <div class="repl-section">
              <div class="repl-section__header">
                <div>
                  <h3 id="replModalTitle" style="margin:0;">New Purchase Request</h3>
                  <p id="replDetailMeta" class="info-text"></p>
                </div>
              </div>
              <div class="form-grid">
                <div class="form-group">
                  <label for="replModalCreatedBy">Created By</label>
                  <input id="replModalCreatedBy" class="input" placeholder="Your name" />
                </div>
                <div class="form-group">
                  <label for="replModalRequestDate">Request Date</label>
                  <input id="replModalRequestDate" type="date" class="input" />
                </div>
                <div class="form-group">
                  <label for="replModalNeededDate">Needed By</label>
                  <input id="replModalNeededDate" type="date" class="input" />
                </div>
              </div>
            </div>

            <div class="repl-section">
              <div class="repl-line-section__header">
                <h4>Line Items</h4>
                <p>Add the inventory lines to purchase.</p>
              </div>
              <div class="repl-line-section">
                <div class="repl-line-controls">
                  <div class="repl-line-field">
                    <label class="repl-line-label" for="replModalItemSearch">Item</label>
                    <div class="search-select" id="replItemSearchWrapper">
                      <input id="replModalItemSearch" class="input" placeholder="Search item..." autocomplete="off" />
                      <input id="replModalItemSelect" type="hidden" />
                      <div id="replItemDropdown" class="search-select__dropdown hidden">
                        <div id="replItemDropdownList" class="search-select__list"></div>
                      </div>
                    </div>
                  </div>
                  <div class="repl-line-field">
                    <label class="repl-line-label" for="replModalUnit">Unit</label>
                    <input id="replModalUnit" class="input" readonly />
                  </div>
                  <div class="repl-line-field">
                    <label class="repl-line-label" for="replModalQty">Qty</label>
                    <input id="replModalQty" type="number" min="1" class="input" />
                  </div>
                  <div class="repl-line-field">
                    <label class="repl-line-label" for="replModalDept">Department</label>
                    <div class="search-select" id="replDeptSearchWrapper">
                      <input id="replModalDeptSearch" class="input" placeholder="Select department" autocomplete="off" />
                      <input id="replModalDept" type="hidden" />
                      <div id="replDeptDropdown" class="search-select__dropdown hidden">
                        <div id="replDeptDropdownList" class="search-select__list"></div>
                      </div>
                    </div>
                  </div>
                  <div class="repl-line-field">
                    <label class="repl-line-label" for="replModalUsage">Last 7d Usage</label>
                    <input id="replModalUsage" type="number" class="input" readonly />
                  </div>
                  <div class="repl-line-field">
                    <label class="repl-line-label">Preview</label>
                    <a id="replModalPreviewLink" class="btn btn-secondary btn-sm preview-link" href="#" style="width:100%; text-align:center;"></a>
                  </div>
                  <div class="repl-line-actions">
                    <button id="btnReplAddLine" type="button" class="btn btn-danger btn-sm">Add Line</button>
                  </div>
                </div>
              </div>

              <div class="table-wrapper">
                <table class="repl-modal-table">
                  <thead>
                    <tr>
                      <th>Item</th>
                      <th>Unit</th>
                      <th>Qty</th>
                      <th>Department</th>
                      <th>Last 7d Usage</th>
                      <th>Preview</th>
                      <th class="table-actions-col">Action</th>
                    </tr>
                  </thead>
                  <tbody id="replModalLinesBody">
                    <!-- Filled by JS -->
                  </tbody>
                </table>
              </div>
            </div>

            <div class="repl-section">
              <div class="repl-section__header">
                <h4>Approvals</h4>
                <p>Track who still needs to approve.</p>
              </div>
              <div id="replApprovalBadges" class="approval-badges"></div>
            </div>

            <div class="repl-footer-actions" style="margin-top:12px;">
              <div style="flex:1"></div>
              <button id="btnReplDelete" type="button" class="btn btn-secondary hidden">Delete Draft</button>
              <button id="btnReplReject" type="button" class="btn btn-secondary hidden">Reject</button>
              <button id="btnReplApprove" type="button" class="btn btn-primary hidden">Approve</button>
              <button id="btnReplSave" type="button" class="btn btn-secondary">Save Draft</button>
              <button id="btnReplSubmit" type="button" class="btn btn-primary">Submit</button>
              <button id="btnReplPrint" type="button" class="btn btn-secondary hidden">Print</button>
            </div>
          </div>
        </section>

        <!-- Preview Modal -->
        <div id="modalPreview" class="modal hidden">
          <div class="modal__backdrop"></div>
          <div class="modal__content modal__content--wide">
            <div class="modal__header">
              <h3>Item Preview</h3>
              <button class="modal__close" data-close-modal="modalPreview">&times;</button>
            </div>
            <div class="modal__body">
              <img id="previewModalImage" class="preview-image" src="" alt="Item preview" />
            </div>
          </div>
        </div>

        <!-- Stock On Hand Report -->
        <section id="page-stock-on-hand" class="page">
          <div class="page-header">
            <div>
              <h2>Stock On Hand</h2>
              <p>Combined view of room & laundry inventory.</p>
            </div>
            <button id="btnPrintStockOnHand" class="btn btn-secondary">Print On-hand</button>
          </div>
          <div class="card">
            <div class="table-wrapper">
              <table>
                <thead>
                  <tr>
                    <th>Item Name</th>
                    <th>Type</th>
                    <th>UOM</th>
                    <th>On Hand</th>
                    <th>Min Stock</th>
                    <th>Max Stock</th>
                    <th>Mandatory</th>
                  </tr>
                </thead>
                <tbody id="stockOnHandTableBody"></tbody>
              </table>
            </div>
          </div>
        </section>
      </main>
    </div>
  </div>

  <!-- Modals -->

  <!-- Room Item Modal -->
  <div id="modalRoomItem" class="modal hidden">
    <div class="modal__backdrop"></div>
    <div class="modal__content">
      <div class="modal__header">
        <h3 id="modalRoomTitle">Add Room Item</h3>
        <button class="modal__close" data-close-modal="modalRoomItem">&times;</button>
      </div>
      <div class="modal__body">
        <form id="roomItemForm">
          <input type="hidden" id="roomItemId" />
          <div class="form-grid">
              <div class="form-group">
                <label for="roomItemName">Item Name</label>
                <select id="roomItemName" class="input proc-select" data-searchable="true"></select>
                <input id="roomItemNameCustom" class="input" placeholder="Or type custom item (non-mandatory)" style="margin-top:6px;" />
              </div>
            <div class="form-group">
              <label for="roomItemCategory">Category</label>
              <select id="roomItemCategory" class="input">
                <option value="Amenities">Amenities</option>
                <option value="Beverage">Beverage</option>
                <option value="Disposable">Disposable</option>
                <option value="Room Equipment">Room Equipment</option>
              </select>
            </div>
            <div class="form-group">
              <label for="roomItemUnit">Unit</label>
              <select id="roomItemUnit" class="input"></select>
            </div>
            <div class="form-group">
              <label class="checkbox-label">
                <input id="roomItemMandatory" type="checkbox" />
                Mandatory Item
              </label>
            </div>
            <div class="form-group">
              <label for="roomParPerRoom">Par per Room</label>
              <input id="roomParPerRoom" type="number" class="input" min="0" value="0" />
            </div>
            <div class="form-group">
              <label for="roomMinStock">Min Stock</label>
              <input id="roomMinStock" type="number" class="input" min="0" value="0" />
            </div>
            <div class="form-group">
              <label for="roomMaxStock">Max Stock</label>
              <input id="roomMaxStock" type="number" class="input" min="0" value="0" />
            </div>
            <div class="form-group form-group--full">
              <p class="info-text" id="roomOnHandInfo">Current On Hand: 0 (read-only; updated via movements/opname).</p>
            </div>
          </div>
        </form>
      </div>
      <div class="modal__footer">
        <button class="btn btn-secondary" data-close-modal="modalRoomItem">Cancel</button>
        <button id="btnSaveRoomItem" class="btn btn-primary">Save</button>
      </div>
    </div>
  </div>

  <!-- Laundry Item Modal -->
  <div id="modalLaundryItem" class="modal hidden">
    <div class="modal__backdrop"></div>
    <div class="modal__content">
      <div class="modal__header">
        <h3 id="modalLaundryTitle">Add Laundry Item</h3>
        <button class="modal__close" data-close-modal="modalLaundryItem">&times;</button>
      </div>
      <div class="modal__body">
        <form id="laundryItemForm">
          <input type="hidden" id="laundryItemId" />
          <div class="form-grid">
              <div class="form-group">
                <label for="laundryItemName">Item Name</label>
                <select id="laundryItemName" class="input proc-select" data-searchable="true"></select>
                <input id="laundryItemNameCustom" class="input" placeholder="Or type custom item (non-mandatory)" style="margin-top:6px;" />
              </div>
            <div class="form-group">
              <label for="laundryItemCategory">Category</label>
              <select id="laundryItemCategory" class="input">
                <option value="Bedsheet">Bedsheet</option>
                <option value="Pillowcase">Pillowcase</option>
                <option value="Duvet Cover">Duvet Cover</option>
                <option value="Bath Towel">Bath Towel</option>
                <option value="Bath Mat">Bath Mat</option>
              </select>
            </div>
            <div class="form-group">
              <label for="laundryItemSize">Size / Spec</label>
              <input id="laundryItemSize" class="input" placeholder="e.g. 160x200cm, 500gsm" />
            </div>
            <div class="form-group">
              <label for="laundryItemUnit">Unit</label>
              <select id="laundryItemUnit" class="input"></select>
            </div>
            <div class="form-group">
              <label class="checkbox-label">
                <input id="laundryItemMandatory" type="checkbox" />
                Mandatory Item
              </label>
            </div>
            <div class="form-group">
              <label for="laundryParPerRoom">Par per Room</label>
              <input id="laundryParPerRoom" type="number" class="input" min="0" value="0" />
            </div>
            <div class="form-group">
              <label for="laundryMinStock">Min Stock</label>
              <input id="laundryMinStock" type="number" class="input" min="0" value="0" />
            </div>
            <div class="form-group form-group--full">
              <p class="info-text" id="laundryOnHandInfo">Current On Hand: 0 (read-only; updated via movements/opname).
              </p>
            </div>
          </div>
        </form>
      </div>
      <div class="modal__footer">
        <button class="btn btn-secondary" data-close-modal="modalLaundryItem">Cancel</button>
        <button id="btnSaveLaundryItem" class="btn btn-primary">Save</button>
      </div>
    </div>
  </div>

  <!-- Adjust Stock Modal -->
  <div id="modalAdjustStock" class="modal hidden">
    <div class="modal__backdrop"></div>
    <div class="modal__content">
      <div class="modal__header">
        <h3>Adjust Stock</h3>
        <button class="modal__close" data-close-modal="modalAdjustStock">&times;</button>
      </div>
      <div class="modal__body">
        <input type="hidden" id="adjustItemId" />
        <input type="hidden" id="adjustItemType" />
        <p id="adjustItemName" style="margin:0 0 8px; font-weight:600;"></p>
        <p id="adjustCurrent" class="info-text" style="margin:0 0 12px;">Current On Hand: 0</p>
        <div class="form-grid">
          <div class="form-group">
            <label for="adjustTargetQty">Target Qty</label>
            <input id="adjustTargetQty" type="number" min="0" class="input" />
          </div>
          <div class="form-group">
            <label for="adjustReason">Reason</label>
            <input id="adjustReason" class="input" placeholder="Breakage, audit, etc." />
          </div>
        </div>
        <p class="info-text">Adjustment posts a movement (IN for increase, OUT for decrease).</p>
      </div>
      <div class="modal__footer">
        <button class="btn btn-secondary" data-close-modal="modalAdjustStock">Cancel</button>
        <button id="btnSubmitAdjustStock" class="btn btn-primary">Post Adjustment</button>
      </div>
    </div>
  </div>

  <!-- New Stock Opname Modal -->
  <div id="modalStockOpname" class="modal hidden">
    <div class="modal__backdrop"></div>
    <div class="modal__content">
      <div class="modal__header">
        <h3>New Stock Opname</h3>
        <button class="modal__close" data-close-modal="modalStockOpname">&times;</button>
      </div>
      <div class="modal__body">
        <form id="stockOpnameForm">
          <div class="form-grid">
            <div class="form-group">
              <label for="opnameNameInput">Session Name</label>
              <input id="opnameNameInput" class="input" required />
            </div>
            <div class="form-group">
              <label for="opnameCoverageInput">Coverage</label>
              <select id="opnameCoverageInput" class="input">
                <option value="ROOM">Room Inventory</option>
                <option value="LAUNDRY">Laundry Inventory</option>
                <option value="BOTH">Both</option>
              </select>
            </div>
            <div class="form-group">
              <label for="opnameDateInput">Target Date</label>
              <input id="opnameDateInput" type="date" class="input" />
            </div>
          </div>
        </form>
      </div>
      <div class="modal__footer">
        <button class="btn btn-secondary" data-close-modal="modalStockOpname">Cancel</button>
        <button id="btnCreateStockOpname" class="btn btn-primary">Create Session</button>
      </div>
    </div>
  </div>

  <!-- Movement Detail Modal -->
  <div id="modalMovementDetail" class="modal hidden">
    <div class="modal__backdrop"></div>
    <div class="modal__content">
      <div class="modal__header">
        <h3 id="movementDetailTitle">Movement Detail</h3>
        <button class="modal__close" data-close-modal="modalMovementDetail">&times;</button>
      </div>
      <div class="modal__body">
        <p id="movementDetailMeta" class="info-text"></p>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Item</th>
                <th>Type</th>
                <th>Qty</th>
                <th>UOM</th>
              </tr>
            </thead>
            <tbody id="movementDetailLines"></tbody>
          </table>
        </div>
        <div style="margin-top:8px;">
          <h4 style="margin:6px 0 4px;">History / Logs</h4>
          <ul id="movementDetailLogs" class="log-list"></ul>
        </div>
      </div>
      <div class="modal__footer">
        <button class="btn btn-secondary" data-close-modal="modalMovementDetail">Close</button>
      </div>
    </div>
  </div>

  <!-- Incoming Modal -->
  <div id="modalIncoming" class="modal hidden">
    <div class="modal__backdrop"></div>
    <div class="modal__content">
      <div class="modal__header">
        <h3>New Incoming</h3>
        <button class="modal__close" data-close-modal="modalIncoming">&times;</button>
      </div>
      <div class="modal__body">
        <div class="form-grid">
          <div class="form-group">
            <label for="incomingDate">Date</label>
            <input id="incomingDate" type="date" class="input" />
          </div>
          <div class="form-group">
            <label for="incomingProperty">Property</label>
            <input id="incomingProperty" class="input" />
          </div>
          <div class="form-group">
            <label for="incomingSourceType">Source Type</label>
            <select id="incomingSourceType" class="input">
              <option value="WITH_PO">With PO</option>
              <option value="WITHOUT_PO">Without PO</option>
              <option value="ADJUSTMENT">Adjustment</option>
            </select>
          </div>
          <div class="form-group">
            <label for="incomingPONumber">PO Number</label>
            <div class="po-search">
              <input id="incomingPOSearch" class="input" placeholder="Search PO number" autocomplete="off" />
              <input id="incomingPONumber" type="hidden" />
              <div id="poDropdown" class="po-dropdown hidden">
                <div id="poDropdownList" class="po-dropdown__list"></div>
                <button type="button" id="poDropdownMore" class="po-dropdown__more hidden">Load more</button>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="incomingNote">Note</label>
            <input id="incomingNote" class="input" placeholder="Notes / remark" />
          </div>
          <div class="form-group form-group--full">
            <label for="incomingBast">BAST Attachment (image or doc, required)</label>
            <input id="incomingBast" type="file" class="input"
              accept=".png,.jpg,.jpeg,.pdf,.doc,.docx,.xls,.xlsx,.csv" />
            <div id="incomingBastLink" class="attachment-link"></div>
          </div>
          <div class="form-group form-group--full">
            <label for="incomingDeliveryProof">Delivery Proof (image or doc, required)</label>
            <input id="incomingDeliveryProof" type="file" class="input"
              accept=".png,.jpg,.jpeg,.pdf,.doc,.docx,.xls,.xlsx,.csv" />
            <div id="incomingDeliveryLink" class="attachment-link"></div>
          </div>
        </div>

        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Item</th>
                <th>UOM</th>
                <th>Qty</th>
              </tr>
            </thead>
            <tbody id="incomingLinesTableBody"></tbody>
          </table>
        </div>
      </div>
      <div class="modal__footer">
        <div class="panel-actions" style="margin:0; width:100%;">
          <button id="btnAddIncomingLine" class="btn btn-secondary btn-sm">Add Line</button>
          <div style="flex:1"></div>
          <button id="btnResetIncoming" class="btn btn-secondary btn-sm">Discard Changes</button>
          <button id="btnPostIncoming" class="btn btn-primary">Post Incoming</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Outgoing Modal -->
  <div id="modalOutgoing" class="modal hidden">
    <div class="modal__backdrop"></div>
    <div class="modal__content">
      <div class="modal__header">
        <h3>New Outgoing</h3>
        <button class="modal__close" data-close-modal="modalOutgoing">&times;</button>
      </div>
      <div class="modal__body">
        <div class="form-grid">
          <div class="form-group">
            <label for="outgoingDate">Date</label>
            <input id="outgoingDate" type="date" class="input" />
          </div>
          <div class="form-group">
            <label for="outgoingProperty">Property</label>
            <input id="outgoingProperty" class="input" />
          </div>
          <div class="form-group">
            <label for="outgoingDestType">Destination</label>
            <select id="outgoingDestType" class="input">
              <option value="DEPARTMENT">Department</option>
              <option value="COMPLIMENTARY">Complimentary</option>
              <option value="WASTAGE">Wastage</option>
              <option value="ADJUSTMENT">Adjustment</option>
            </select>
          </div>
          <div class="form-group">
            <label for="outgoingDestRef">Destination Ref</label>
            <input id="outgoingDestRef" class="input" placeholder="Housekeeping, Guest, etc." />
          </div>
          <div class="form-group">
            <label for="outgoingNote">Note</label>
            <input id="outgoingNote" class="input" placeholder="Notes / remark" />
          </div>
        </div>

        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Item</th>
                <th>UOM</th>
                <th>Qty</th>
              </tr>
            </thead>
            <tbody id="outgoingLinesTableBody"></tbody>
          </table>
        </div>
      </div>
      <div class="modal__footer">
        <div class="panel-actions" style="margin:0; width:100%;">
          <button id="btnAddOutgoingLine" class="btn btn-secondary btn-sm">Add Line</button>
          <div style="flex:1"></div>
          <button id="btnResetOutgoing" class="btn btn-secondary btn-sm">Discard Changes</button>
          <button id="btnPostOutgoing" class="btn btn-primary">Post Outgoing</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Document Preview Modal -->
  <div id="modalDocPreview" class="modal hidden">
    <div class="modal__backdrop"></div>
    <div class="modal__content modal__content--wide">
      <div class="modal__header">
        <h3 id="docPreviewTitle">Document Preview</h3>
        <button class="modal__close" data-close-modal="modalDocPreview">&times;</button>
      </div>
      <div class="modal__body image-preview">
        <img id="docPreviewImage" alt="Document preview" />
      </div>
      <div class="modal__footer">
        <button class="btn btn-secondary" data-close-modal="modalDocPreview">Close</button>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast hidden"></div>

  <datalist id="procItemNames">
    <option value="Amenity Kit - Standard"></option>
    <option value="600ml Mineral Water"></option>
    <option value="Facial Tissue Box"></option>
    <option value="Bedsheet Queen 300TC"></option>
    <option value="Bath Towel 500gsm"></option>
  </datalist>
  <datalist id="procVendors">
    <option value="PT Tirta Investama"></option>
    <option value="PT Tisu Nusantara"></option>
    <option value="PT Linen Bersama"></option>
    <option value="PT Tekstil Sejahtera"></option>
  </datalist>

  <script src="app.js"></script>
</body>


</html>
